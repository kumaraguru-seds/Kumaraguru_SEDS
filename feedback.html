<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEDS Team Feedback Form</title>
    <link rel="icon" href="sedsb.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <meta name="author" content="Manikandan N">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://kumaraguruseds.space/">
  <meta property="og:title" content="Kumaraguru SEDS">
  <meta property="og:description" content="Kumaraguru SEDS is a student-driven chapter dedicated to space exploration, astronomy, and aerospace innovation. We conduct hands-on workshops, stargazing sessions, and technical projects to inspire curiosity and scientific learning. Our mission is to empower young minds to explore the universe and contribute to the advancement of space science and technology.">
  <meta property="og:image" content="https://kumaraguruseds.space/sedsb.png">
  <link rel="icon" href="sedsb.png" type="image/png">
<style>
        :root {
            --sidebar-bg: #132233;
            --text: #ffffff;
            --muted: #c9d1e6;
            --accent: #4da6ff;
            --card: rgba(255, 255, 255, 0.08);
            --form-bg: #f0f0f0;
            --form-shadow-light: #ffffff;
            --form-shadow-dark: #bebebe;
            --form-text: #333;
            --error-color: #d9534f;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
        }

        body {
            font-family: "Poppins", sans-serif;
            color: var(--text);
            min-height: 100vh;
            position: relative;
            z-index: 0;
            background-color: #000;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('background.jpg') no-repeat center center/cover fixed;
            filter: brightness(70%);
            z-index: -1;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .left-header {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        header img {
            height: 60px;
        }

        header .seds-logo {
            height: 70px;
        }

        .events-title {
            margin-top: 8px;
            font-size: 50px;
            color: #FFFF;
            text-align: center;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -260px;
            width: 260px;
            height: 100%;
            background: var(--sidebar-bg);
            padding: 30px 20px;
            transition: 0.3s;
            z-index: 2000;
            overflow-y: auto;
            max-height: 100vh;
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar a {
            display: block;
            padding: 15px 0;
            color: #fff;
            font-size: 20px;
            text-decoration: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar a:hover {
            color: var(--accent);
        }

        .close-btn {
            font-size: 22px;
            color: #fff;
            cursor: pointer;
            text-align: right;
            margin-bottom: 20px;
            display: block;
        }

        .hamburger {
            font-size: 28px;
            cursor: pointer;
            color: white;
        }

        .main {
            text-align: center;
            padding: 40px 20px;
        }
        .section {
            margin: 40px auto;
            padding: 25px;
            max-width: 1100px;
            background: var(--card);
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.8s ease-out;
        }
        .section.show {
            opacity: 1;
            transform: translateY(0);
        }
        .section h1, .contact h2 {
            font-size: 28px;
            margin-bottom: 14px;
            text-align: center;
            color: var(--section-title);
        }
        
        .section p, .team-card p, .staff p, .contact p {
            font-size: 14px;
            color: var(--muted);
            text-align: justify;
        }
        
        /* Stars */
       .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px #fff, 0 0 20px #fff;
            animation: fall linear infinite;
        }

        @keyframes fall {
            from {
                transform: translateY(-20px);
                opacity: 1;
            }
            to {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        /* Form Styling */
        .form-container {
            background: rgba(255, 255, 255, 0.08);
            padding: 30px 40px;
            border-radius: 15px;
            max-width: 800px; 
            width: 100%;
            margin: 40px auto;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            color: #fff;
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease;
            text-align: center;
        }
        .form-container.show {
            opacity: 1;
            transform: translateY(0);
        }
        .form-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .form-header .icon {
            width: 80px;
            height: 80px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 38px;
            margin: 0 auto 15px;
            color: #fff;
            animation: bounce 5s infinite;
        }
        @keyframes bounce {
            0%,100%{transform:scale(1);}
            50%{transform:scale(1.2);}
        }
        .form-header h2 {
            margin: 0;
            font-size: 30px;
            color:#1e90ff;
        }
        .form-header p {
            color: #ddd;
            font-size: 20px;
            margin-top: 8px;
        }
        .form-group label {
            font-size: 15px;
            font-weight: 500;
            display: block;
            margin-bottom: 6px;
            color: #fff;
        }

        .app-form-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        /* Single column for full-width fields like Textarea */
        .app-form-group-full {
             display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }
        .input-box {
            display: flex;
            flex-direction: column;
            width: 100%;
            text-align: left;
        }
        .input-box.invalid input,
        .input-box.invalid textarea { 
            border: 2px solid var(--error-color);
        }
        /* --- FIX APPLIED HERE: Using display: none/block for robust visibility control --- */
        .input-box small.error-message {
            color: var(--error-color);
            font-size: 12px;
            margin-top: 5px;
            display: none; /* Hidden by default */
            text-align: left;
        }
        .input-box.invalid small.error-message {
            display: block; /* Shown when parent has 'invalid' class */
        }
        /* --- END FIX --- */
        .app-form-group input, 
        .app-form-group-full input, .app-form-group-full textarea {
            width: 100%;
            padding: 12px;
            font-size: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            outline: none;
            transition: 0.3s;
            color: #000;
            background: #fff;
        }
        .app-form-group input:focus, 
        .app-form-group-full input:focus, .app-form-group-full textarea:focus {
            border-color: var(--accent);
            box-shadow: 0 0 5px rgba(0, 195, 126, 0.5);
        }

        /* Textarea specific styling */
        .app-form-group-full textarea {
            min-height: 120px; 
            resize: vertical;
        }

        /* Buttons */
        .submit-button {
            padding: 16px 30px;
            background: var(--accent);
            color: #000;
            font-weight: 700;
            font-size: 18px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.3s ease;
            box-shadow: 0 0 12px rgba(77, 166, 255, 0.7); 
            margin-top: 15px;
        }
        .submit-button:hover {
            background: #fff;
            color: #000;
            transform: scale(1.06);
            box-shadow: 0 0 18px rgba(77, 166, 255, 0.9); 
        }

        /* Status Box */
        .status-box {
            margin-top: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            font-weight: 500;
            text-align: center;
            display: none;
        }
        .status-box.processing {
            background: rgba(27, 48, 63, 0.55);
            color: #4da6ff;
            font-weight: bold;
            display: block;
        }
        .status-box.success {
            background: rgba(30, 60, 40, 0.55);
            color: #28a745;
            font-weight: bold;
            display: block;
        }
        .status-box.error {
            background: rgba(255, 0, 0, 0.2);
            color: #ff0000;
            font-weight: bold;
            display: block;
        }


        /* Contact Section Styling */
        .contact {
            background: var(--sidebar-bg);
            padding: 40px 25px;
            text-align: center;
            border-radius: 16px;
            margin: 40px auto;
            max-width: 1100px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .contact h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .contact-items {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .contact-item {
            text-align: center;
            max-width: 220px;
        }

        .contact-item img {
            width: 30px;
            margin-bottom: 8px;
        }

        .contact-item p {
            color: var(--muted);
            font-size: 12px;
            line-height: 1.4;
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }

        .contact-form input,
        .contact-form textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            transition: border-color 0.3s;
            background-color: #fff;
            color: #333;
        }

        .contact-form textarea {
            height: 100px;
        }

        .contact-form button {
            background-color: var(--accent);
            color: #000;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: 0.3s;
            align-self: flex-start;
        }

        .contact-form button:hover {
            background: #fff;
            color: #000;
            transform: scale(1.05);
        }

        .contact-form button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }

        .contact,
        .contact-form {
            position: relative;
            z-index: 10;
        }

        .sidebar {
            z-index: 2000;
        }

        .contact-form .status-box {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            font-size: 16px;
        }

        .contact-form .status-success {
            background-color: #28a745;
            color: #fff;
            font-weight: bold;
        }

        .submitting {
            background-color: #ffc107;
            color: #fff;
            font-weight: bold;
            border-radius: 16px;
            padding: 20px 25px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
            animation: fadeSlide 0.7s ease forwards;
            max-width: 500px;
            margin: 15px auto;
        }

        .contact-form .status-error {
            background: rgba(255, 0, 0, 0.2);
            color: #ff0000;
            font-weight: bold;
            border-radius: 16px;
            padding: 20px 25px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
            animation: fadeSlide 0.7s ease forwards;
            max-width: 500px;
            margin: 15px auto;
        }

        .error-input {
            border-color: red !important;
        }

        .error-message {
            color: rgb(248, 3, 3);
            font-size: 12px;
            margin-top: 5px;
            margin-bottom: 3px;
            display: none;
            text-align: left;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .content-card-like {
            color: #ffffff;
            border-radius: 16px;
            padding: 20px 25px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
            animation: fadeSlide 0.7s ease forwards;
            max-width: 500px;
            margin: 15px auto;
        }

        .socials {
            margin-top: 15px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 30px;
        }

        .social-item {
            text-align: center;
        }

        .contact-item a {
            text-decoration: none;
            color: inherit;
        }

        .social-item a {
            text-decoration: none;
            color: inherit;
        }

        .social-item img {
            width: 40px;
            margin: 0 auto 5px;
        }

        .social-item p {
            color: white;
            font-size: 14px;
            margin: 0;
        }

        .socials img:hover {
            transform: scale(1.3);
        }

        .contact img:hover {
            transform: scale(1.3);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .app-form-group {
                grid-template-columns: 1fr;
            }
            header img {
                height: 50px;
            }
            header .seds-logo {
                height: 60px;
            }
            .events-title {
                font-size: 38px;
            }
            body {
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="stars-container"></div>
    <div class="sidebar" id="sidebar">
        <span class="close-btn" onclick="toggleSidebar()">Menu Ã—</span>
        <a href="index.html#home">Home</a>
        <a href="index.html#vision">Vision</a>
        <a href="index.html#mission">Mission</a>
        <a href="index.html#staff">Staff Coordinator</a>
        <a href="index.html#teams">Our Teams</a>
        <a href="#contact">Contact Us</a>
        <a href="Events.html">Events</a>
        <a href="Kosmorena25.html">Kosmorena'24</a>
        <a href="https://sedsalpha.wordpress.com/kosmorena-2021/">Kosmorena'21</a>
        <a href="team_members_event.html">Events Team Members</a>
        <a href="team_members_pr.html">PR Team Members</a>
        <a href="team_members_admin.html">Admin Team Members</a>
        <a href="team_members_impm.html">IM & PM Team Members</a>
        <a href="team_members_media.html">Media Team Members</a>
        <a href="team_members_finance.html">Finance Team Members</a>
        <a href="astronomy_team_members.html">Astronomy Team Members</a>
    </div>

       <header>
        
        <div class="left-header">
            <span class="hamburger" onclick="toggleSidebar()">â˜°</span>
            <img src="kumaraguru.png" alt="Kumaraguru Institutions">
        </div>
        <img src="SEDS.png" alt="SEDS Logo" class="seds-logo">
    </header>

    <div class="main">
        <h1 class="events-title">SEDS FEEDBACK</h1>

        <div class="form-container show" id="feedback-form-container">
            <form id="feedbackForm">
                <div class="form-header">
                     <div class="icon">ðŸ’¬</div> <h2>Dedicated Team Feedback Form</h2>
                     <p>All fields are required. Each feedback field needs a minimum of 30 characters.</p>
                </div>
                
                <div class="app-form-group">
                    <div class="input-box">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required>
                        <small class="error-message">Name is required.</small>
                    </div>
                    <div class="input-box">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" placeholder="Enter your email" required>
                      <small class="error-message">Email is required.</small>
                    </div>
                </div>

                <div class="app-form-group">
                    <div class="input-box">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" placeholder="Enter 10-digit number" required maxlength="10">
                        <small class="error-message">Phone number is required.</small>
                    </div>
                    <div class="input-box"></div> 
                </div>
                
                <hr style="border-color: rgba(255, 255, 255, 0.2); margin: 10px 0;">

                <div class="app-form-group-full">
                    <div class="input-box">
                        <label for="adminFeedback">Admin Team Feedback *</label>
                        <textarea id="adminFeedback" name="adminFeedback" placeholder="Feedback for the Admin team (Min 30 Chars)" required></textarea>
                        <small class="error-message">Admin feedback is required.</small>
                    </div>
                </div>
                
                <div class="app-form-group-full">
                    <div class="input-box">
                        <label for="prFeedback">PR Team Feedback *</label>
                        <textarea id="prFeedback" name="prFeedback" placeholder="Feedback for the PR team (Min 30 Chars)" required></textarea>
                        <small class="error-message">PR feedback is required.</small>
                    </div>
                </div>
                
                <div class="app-form-group-full">
                    <div class="input-box">
                        <label for="eventsFeedback">Events Team Feedback *</label>
                        <textarea id="eventsFeedback" name="eventsFeedback" placeholder="Feedback for the Events team (Min 30 Chars)" required></textarea>
                        <small class="error-message">Events feedback is required.</small>
                    </div>
                </div>

                <div class="app-form-group-full">
                    <div class="input-box">
                        <label for="mediaFeedback">Media Team Feedback *</label>
                        <textarea id="mediaFeedback" name="mediaFeedback" placeholder="Feedback for the Media team (Min 30 Chars)" required></textarea>
                        <small class="error-message">Media feedback is required.</small>
                    </div>
                </div>

                <div class="app-form-group-full">
                    <div class="input-box">
                        <label for="impmFeedback">IM & PM Team Feedback *</label>
                        <textarea id="impmFeedback" name="impmFeedback" placeholder="Feedback for the IM & PM team (Min 30 Chars)" required></textarea>
                        <small class="error-message">IM & PM feedback is required.</small>
                    </div>
                </div>

                <div class="app-form-group-full">
                    <div class="input-box">
                        <label for="generalFeedback">General/Other Feedback *</label>
                        <textarea id="generalFeedback" name="generalFeedback" placeholder="Any other general feedback (Min 30 Chars)" required></textarea>
                        <small class="error-message">General feedback is required.</small>
                    </div>
                </div>

                <button type="submit" class="submit-button">Submit Feedback</button>

                <div id="statusBox" class="status-box"></div> 
            </form>
        </div>
    </div>
    
      <div class="contact" id="contact">
        <h2>Contact Us</h2><br>
        <div class="contact-items">
            <div class="contact-item">
                <a href="https://maps.app.goo.gl/TBWDGsAeKccGw9cm8" target="_blank">
                    <img src="location.png" alt="Location">
                    <p>Kumaraguru Campus<br>Saravanampatti,<br>Chinnavedampatti (Post),<br>Coimbatore- 641049, Tamilnadu.</p>
                </a>
            </div>

            <div class="contact-item">
                <a href="mailto:seds@kct.ac.in,manilunar07@gmail.com">
                    <img src="email.png" alt="Email">
                    <p>manilunar07@gmail.com<br>seds@kct.ac.in</p>
                </a>
            </div>

            <div class="contact-item">
                <a href="tel:+919344752075">
                    <img src="phone.png" alt="Phone">
                    <p>+91 9344752075</p>
                </a>
            </div>
        </div>
        <form class="contact-form" id="contactForm" novalidate action="https://script.google.com/macros/s/AKfycbxDsJkhIuE7utHhMCKxxttqPAodQr5lD4mGGs_ouXwJAGSbfH9bqBCoeYMiYxLq2IAx/exec" method="post">
            <div class="form-group">
                <input type="text" name="name" placeholder="Your Name" required>
                <span class="error-message"></span>
            </div>
            <div class="form-group">
                <input type="email" name="email" placeholder="Your Email" required>
                <span class="error-message"></span>
            </div>
            <div class="form-group">
                <input type="tel" name="phone" placeholder="Phone Number" required>
                <span class="error-message"></span>
            </div>
            <div class="form-group">
                <textarea name="message" placeholder="Your Message" required></textarea>
                <span class="error-message"></span>
            </div>
            <button type="submit">Send Message</button>
            <div id="status" class="status-box content-card-like"></div>
        </form>
        <br>
        <div class="socials">
            <div class="social-item">
                <a href="https://www.instagram.com/seds_kumaraguru">
                    <img src="instagram.png" alt="Instagram">
                    <p>seds_kumaraguru</p>
                </a>
            </div>
            <div class="social-item">
                <a href="https://www.linkedin.com/company/seds-kct/">
                    <img src="linkedin.png" alt="LinkedIn">
                    <p>Kumaraguru SEDS</p>
                </a>
            </div>
            <div class="social-item">
                <a href="https://youtube.com/@kumaraguru_seds">
                    <img src="youtube.png" alt="Email">
                    <p>Kumaraguru_SEDS</p>
                </a>
            </div>
        </div>
        <br>
        <h2>Follow Us</h2>
    </div>
    <script>
// --- IMPORTANT: Replace with your actual Google Apps Script URL for Feedback ---
const FEEDBACK_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyGMg2-BJbzSoVfnvroMP0oIPvEWB0_SjqDJ-OT_K-pGtP9picJ690dQ8cfW0uh-PZ5/exec"; 

// --- Feedback Form Logic ---
const feedbackForm = document.getElementById("feedbackForm");
const statusBox = document.getElementById("statusBox");

function showStatus(element, message, type) {
    element.innerHTML = message;
    element.className = 'status-box';
    if (type === 'processing') {
        element.classList.add('processing');
    } else if (type === 'success') {
        element.classList.add('success');
    } else if (type === 'error' || type === 'blocked') {
        element.classList.add('error');
    }
    // The CSS rules based on the class will set display: block
}

/**
 * Validates a single form field based on ID and content rules.
 * Manages the 'invalid' class on the parent input-box element.
 */
function validateFeedbackField(input) {
    const parentDiv = input.closest('.input-box');
    const errorElement = parentDiv ? parentDiv.querySelector('.error-message') : null;
    let errorMessage = '';
    const value = input.value.trim();
    const isTextarea = input.tagName.toLowerCase() === 'textarea';

    // 1. Validation for Required Fields (All inputs and textareas)
    if (input.required && !value) {
        errorMessage = 'This field is required.';
    } 
    // 2. Specific input validations
    else if (input.id === 'fullName') {
        if (value && !/^[A-Za-z\s]{3,}$/.test(value)) {
            errorMessage = 'Name must be at least 3 characters and contain only letters and spaces.';
        }
    } else if (input.id === 'email') {
        if (value && !/^[^\s@]+@[^\s@]+\.\S+$/.test(value)) {
            errorMessage = 'Please enter a valid email address.';
        }
    } else if (input.id === 'phone') {
        if (value && (value.length !== 10 || isNaN(value))) {
            errorMessage = 'Please enter a valid 10-digit phone number.';
        }
    } 
    // 3. Validation for ALL Textareas (must be >= 30 characters and is required)
    else if (isTextarea && value.length > 0) {
        if (value.length < 30) {
            errorMessage = `Feedback must be at least 30 characters. Current length: ${value.length}`;
        }
    }


    if (errorMessage) {
        if (parentDiv) parentDiv.classList.add('invalid');
        if (errorElement) {
            errorElement.textContent = errorMessage;
        }
        return false;
    } else {
        if (parentDiv) parentDiv.classList.remove('invalid');
        if (errorElement) {
            errorElement.textContent = errorElement.dataset.defaultMessage || ''; // Clear message
        }
        return true;
    }
}

// Store default error messages for easier reset
document.querySelectorAll('.input-box small.error-message').forEach(el => {
    el.dataset.defaultMessage = el.textContent;
    el.textContent = ''; // Clear initial content, will be set on error
});


// --- SUBMISSION LOGIC ---
feedbackForm.addEventListener("submit", async function(event) {
    event.preventDefault();
    const submitButton = feedbackForm.querySelector('.submit-button');

    // Select all inputs and textareas in the feedback form
    const formElements = feedbackForm.querySelectorAll('input, textarea');
    let formIsValid = true;

    formElements.forEach(input => {
        // Validate every field
        if (!validateFeedbackField(input)) {
            formIsValid = false;
        }
    });
    
    if (!formIsValid) {
        showStatus(statusBox, "Please fix all errors in the form before submitting.", "error");
        return;
    }

    // Disable button and show processing status
    submitButton.disabled = true;
    showStatus(statusBox, "Processing submission...", "processing");
    
    // Extracting data
    const formData = new FormData(feedbackForm);
    const data = {
        fullName: formData.get("fullName"),
        email: formData.get("email"),
        phone: formData.get("phone"),
        adminFeedback: formData.get("adminFeedback"),
        prFeedback: formData.get("prFeedback"),
        eventsFeedback: formData.get("eventsFeedback"),
        mediaFeedback: formData.get("mediaFeedback"),
        impmFeedback: formData.get("impmFeedback"),
        generalFeedback: formData.get("generalFeedback")
    };
    
    const dataToSend = JSON.stringify(data);
    
    try {
        const response = await fetch(FEEDBACK_SCRIPT_URL, {
            method: "POST",
            body: dataToSend,
            headers: {
                // Important for Google Apps Script doPost(e) with JSON payload
                'Content-Type': 'text/plain' 
            }
        });

        // Check if the response is valid JSON
        let result;
        try {
            result = await response.json();
        } catch (e) {
            throw new Error("Invalid response received from server. Check the script URL and deployment.");
        }

        if (result.status === 'SUCCESS') {
            showStatus(statusBox, "âœ… Feedback submitted successfully!", "success");
            // Clear the form and reset validation classes
            feedbackForm.reset();
            document.querySelectorAll('.input-box.invalid').forEach(el => el.classList.remove('invalid'));
        } else if (result.status === 'BLOCKED') {
             showStatus(statusBox, `ðŸ›‘ Submission Blocked: ${result.message}`, "blocked");
        } else {
            throw new Error(result.message || "An unknown error occurred during submission.");
        }
    } catch (error) {
        showStatus(statusBox, `âŒ Submission failed: ${error.message}`, "error");
        console.error("Error submitting form:", error);
    } finally {
        submitButton.disabled = false;
    }
});

// --- REAL-TIME VALIDATION ---
function setupRealTimeValidation() {
    // Select all inputs and textareas in the feedback form
    const inputsToValidate = feedbackForm.querySelectorAll('input, textarea');

    inputsToValidate.forEach(input => {
        // Validate immediately as the user types (input)
        input.addEventListener('input', (e) => {
            validateFeedbackField(e.target);
        });

        // Validate when the user leaves the field
        input.addEventListener('blur', (e) => {
            validateFeedbackField(e.target);
        });
    });
}

// Initialize real-time validation when the script loads
setupRealTimeValidation();

// --- Sidebar Logic (unchanged) ---
function toggleSidebar() {
    const sidebar = document.getElementById("sidebar");
    const mainContent = document.getElementById("main");
    sidebar.classList.toggle("active");
}

// Fade-in effect for sections on page load
document.addEventListener("DOMContentLoaded", function() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');
            }
        });
    }, { threshold: 0.1 });
    document.querySelectorAll('.section, .form-container').forEach(section => {
        observer.observe(section);
    });
});

        // --- Contact Form Logic ---
       const form = document.getElementById('contactForm');
        const statusDiv = document.getElementById('status');
        const submitButton = form.querySelector('button[type="submit"]');

        function validateContactField(input) {
            const errorSpan = input.closest('.form-group').querySelector('.error-message');
            let errorMessage = '';

            if (input.name === 'name') {
                if (!input.value.trim()) {
                    errorMessage = 'Enter your Name.';
                } else if (!/^[a-zA-Z\s]+$/.test(input.value.trim())) {
                    errorMessage = 'Please enter a valid name (letters and spaces only).';
                }
            } else if (input.name === 'email') {
                if (!input.value.trim()) {
                    errorMessage = 'Enter your Email ID.';
                } else if (!/^\S+@\S+\.\S+$/.test(input.value.trim())) {
                    errorMessage = 'Please enter a valid email address.';
                }
            } else if (input.name === 'phone') {
                if (!input.value.trim()) {
                    errorMessage = 'Enter your Phone number.';
                } else if (input.value.length !== 10 || isNaN(input.value)) {
                    errorMessage = 'Please enter a valid 10-digit mobile number.';
                }
            } else if (input.name === 'message' && !input.value.trim()) {
                errorMessage = 'Enter your Message here.';
            }

            if (errorMessage) {
                input.classList.add('error-input');
                errorSpan.textContent = errorMessage;
                errorSpan.style.display = 'block';
                return false;
            } else {
                input.classList.remove('error-input');
                errorSpan.style.display = 'none';
                return true;
            }
        }

        form.querySelectorAll('input, textarea').forEach(input => {
            input.addEventListener('input', () => validateContactField(input));
            input.addEventListener('blur', () => validateContactField(input));
        });

        form.addEventListener('submit', function(event) {
            event.preventDefault();
            
            let allValid = true;
            form.querySelectorAll('input, textarea').forEach(input => {
                if (!validateContactField(input)) {
                    allValid = false;
                }
            });

            if (!allValid) {
                statusDiv.innerHTML = "Please fix the errors above.";
                statusDiv.className = 'status-error';
                statusDiv.style.display = 'block';
                return;
            }

            statusDiv.innerHTML = "Submitting...";
            statusDiv.className = 'submitting';
            statusDiv.style.display = 'block';
            submitButton.disabled = true;

            const formData = new FormData(form);
            const xhr = new XMLHttpRequest();
            xhr.open('POST', form.action);
            xhr.setRequestHeader('Accept', 'application/json');

            xhr.onload = function() {
                submitButton.disabled = false;
                if (xhr.status === 200) {
                    try {
                        const response = JSON.parse(xhr.responseText);
                        if (response.result === 'success') {
                            statusDiv.innerHTML = "Message sent successfully!";
                            statusDiv.className = 'status-box content-card-like status-success';
                            form.reset();
                        } else {
                            statusDiv.innerHTML = "Error: " + response.message;
                            statusDiv.className = 'status-error';
                        }
                    } catch (e) {
                        statusDiv.innerHTML = "An unexpected error occurred.";
                        statusDiv.className = 'status-error';
                    }
                } else {
                    statusDiv.innerHTML = "Error: Could not send message.";
                    statusDiv.className = 'status-error';
                }
            };
            xhr.send(formData);
        });
        // --- Sidebar and Scroll Animations ---
        function toggleSidebar() { document.getElementById("sidebar").classList.toggle("active"); }
        document.addEventListener("click", function(e) {
            const sidebar = document.getElementById("sidebar");
            const hamburger = document.querySelector(".hamburger");
            if (sidebar.classList.contains("active") && !sidebar.contains(e.target) && !hamburger.contains(e.target)) {
                sidebar.classList.remove("active");
            }
        });
        const sections = document.querySelectorAll(".section, .event-gallery, .form-container, .contact");
        const secObserver = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("show");
                }
            });
        }, { threshold: 0.2 });
        sections.forEach(sec => secObserver.observe(sec));

          // --- Falling Stars Script ---
    document.addEventListener('DOMContentLoaded', () => {
        const starsContainer = document.querySelector('.stars-container');
        
        // Change this number to control the quantity of stars
        const numberOfStars = 200; 

        function createStar() {
            const star = document.createElement('div');
            star.classList.add('star');
            const size = Math.random() * 3 + 1;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.left = `${Math.random() * 100}%`;
            const duration = Math.random() * 5 + 3;
            const twinkleDuration = Math.random() * 2 + 1;
            star.style.animation = `
                fall ${duration}s linear infinite,
                twinkle ${twinkleDuration}s ease-in-out infinite
            `;
            starsContainer.appendChild(star);
        }

        for (let i = 0; i < numberOfStars; i++) {
            createStar();
        }
    });
</script>